# ranger --copy-config=all

set colorscheme shk
set viewmode multipane

# =======
# Options
# =======

set show_hidden false
# always multiple never
set confirm_on_delete multiple
#set use_preview_script false
set automatically_count_files true
set vcs_aware false
#set vcs_backend_git enabled
#set vcs_backend_hg disabled
#set vcs_backend_bzr disabled
#set vcs_backend_svn disabled
#set vcs_msg_length 50
#set preview_images false
set unicode_ellipsis true
#set show_hidden_bookmarks true
#set preview_files true
#set preview_directories true
#set collapse_preview true
#set wrap_plaintext_previews false
set save_console_history false
set status_bar_on_top false
#set draw_progress_bar_in_status_bar true
# separators outline both none
set draw_borders none
set dirname_in_tabs true
set mouse_enabled true
#set display_free_space_in_status_bar true
#set display_tags_in_all_columns true
#set update_title true
# directories
set shorten_title 1
set hostname_in_titlebar true
set tilde_in_titlebar true
set scroll_offset 8
set flushinput true

# Padding on the right when there's no preview?
# This allows you to click into the space to run the file.
set padding_right true

set autosave_bookmarks true
set save_backtick_bookmark false

# takes time
set autoupdate_cumulative_size true

set show_cursor false

# size natural basename atime ctime mtime type random
set sort natural
set sort_reverse false
set sort_case_insensitive false
set sort_directories_first true
set sort_unicode false

# Whether to include bookmarks in cd command
set cd_bookmarks true

set cd_tab_case sensitive
set cd_tab_fuzzy false

# Avoid previewing files larger than this size, in bytes.  Use a value of 0 to
# disable this feature.
set preview_max_size 0

# The key hint lists up to this size have their sublists expanded.
# Otherwise the submaps are replaced with "...".
set hint_collapse_threshold 10

# Add the highlighted file to the path in the titlebar
set show_selection_in_titlebar true

# The delay that ranger idly waits for user input, in milliseconds, with a
# resolution of 100ms.  Lower delay reduces lag between directory updates but
# increases CPU load.
set idle_delay 2000

set metadata_deep_search false
set clear_filters_on_dir_change false

# absolute relative false
set line_numbers false
# first = 1 or 0
set one_indexed false

set save_tabs_on_exit false
set wrap_scroll false

set size_in_bytes false

#default_linemode sizehumanreadablemtime
default_linemode devicons

# ======
# Macros
# ======

# %f the highlighted file
# %d the path of the current directory
# %s the selected file in the current directory
# %t all tagged files in the current directory
# %c the full paths of the currently copied/cut files
# %p the full paths of the selection files

# =======
# Aliases
# =======

alias filter     scout -prts
alias find       scout -aets
alias mark scout -mr
alias unmark scout -Mr
alias search     scout -rs
#alias search_inc scout -rts
alias travel     scout -aefklst

map S shell $SHELL

map = mark
map - unmark
map zzz yank %t

# ====
# Keys
# ====

map ? help
map q quit
map Q quitall
map :  console
map ;  console
#map !  console shell%space
map r  console -p6 shell  %%s
#map s  console find%space
#map e edit

#n
map nf console touch%space
map nd console mkdir%space

map cd console cd%space
#f
#map fo shell -f open %f
#map fd delete
map fd shell gio trash %s
map fr rename_append
map fx cut
map fc copy
map fv paste overwrite=True
#<backspace>
map fh set show_hidden!
map f. shell ~/.local/bin/dotify %s
#map delete delete
#map rename rename_append
#map cut cut
#map copy copy
#map paste paste overwrite=True
#map fk shell cd %d

#i
map ii display_file
map is shell -p du --max-depth=1 -h --apparent-size
map ip yank path
map id yank dir
map in yank name
map ib yank name_without_extension
#map i= console chmod %%s

#s
map / console filter%space
#map / console scout -ftsea%space
#map /  console search%space
#map n  search_next
#map N  search_next forward=False
map sd chain filter_stack clear ; filter_stack add type d
map sf chain filter_stack clear ; filter_stack add type f
map sl chain filter_stack clear ; filter_stack add type l
#map s" filter_stack add duplicate
#map s' filter_stack add unique
#map s| filter_stack add or
#map s& filter_stack add and
#map s! filter_stack add not
map ss filter_stack clear

# Change the line mode
#map Mf linemode filename
#map Mi linemode fileinfo
#map Mm linemode mtime
#map Mh linemode humanreadablemtime
#map Mp linemode permissions
#map Ms linemode sizemtime
#map MH linemode sizehumanreadablemtime
#map Mt linemode metatitle

map <Space> mark_files toggle=True

# Tabs
map tn tab_new
map tc tab_close
map to tab_move 1
map tO tab_move -1
map tr tab_restore
map t1 tab_open 1
map t2 tab_open 2
map t3 tab_open 3
map t4 tab_open 4
map t5 tab_open 5
map t6 tab_open 6
map t7 tab_open 7
map t8 tab_open 8
map t9 tab_open 9

map or set sort_reverse!
map oz set sort=random
map os chain set sort=size;      set sort_reverse=False
map ob chain set sort=basename;  set sort_reverse=False
map on chain set sort=natural;   set sort_reverse=False
map om chain set sort=mtime;     set sort_reverse=False
map oc chain set sort=ctime;     set sort_reverse=False
map oa chain set sort=atime;     set sort_reverse=False
map ot chain set sort=type;      set sort_reverse=False
map oe chain set sort=extension; set sort_reverse=False

map dc get_cumulative_size
