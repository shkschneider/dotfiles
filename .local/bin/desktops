#!/usr/bin/env bash

XDG_DATA_DIRS="$XDG_DATA_DIRS:$HOME/.local/share"

desktops=()
while read location ; do
  while read desktop ; do
    desktops+=($desktop)
  done < <(find $location -type f,l -name '*.desktop' 2>/dev/null)
done < <(echo $XDG_DATA_DIRS | tr ':' "\n")

echo ${desktops[@]} | tr ' ' "\n" | sort -u

exit 0

# EOF
